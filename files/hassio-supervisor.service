[Unit]
Description=Hass.io supervisor
Requires=%%SERVICE_DOCKER%% dbus.service
Wants=network-online.target hassio-apparmor.service time-sync.target
After=%%SERVICE_DOCKER%% dbus.service network-online.target hassio-apparmor.service time-sync.target
StartLimitIntervalSec=60
StartLimitBurst=5
ConditionPathExists=/run/dbus/system_bus_socket
ConditionPathExists=/run/docker.sock

[Service]
Type=simple
Restart=always
RestartSec=5s
ExecStartPre=-%%BINARY_DOCKER%% stop hassio_supervisor
ExecStart=%%BINARY_HASSIO%%
ExecStop=-%%BINARY_DOCKER%% stop hassio_supervisor

[Install]
WantedBy=multi-user.target
